# Terraform Importer

Status: Early Access Program

Terraform Importer is a standalone utility to import existing infrastructure
into a Terraform state, based on existing Terraform configs. Its target use-case
is to facilitate migration between other infrastructure-as-code tools (such as
[Deployment Manager](https://cloud.google.com/deployment-manager)), and configs
generated by the Terrarom Engine.

## Requirements

- [Terraform 0.12+](https://www.terraform.io/downloads.html)
- [Go 1.14+](https://golang.org/dl/)

## Usage

### Installing and Running

Enter the directory containing Terraform configs:

```shell
cd ~/path/to/terraform/configs/
```

Install then run (recommended):

```shell
go install github.com/GoogleCloudPlatform/healthcare-data-protection-suite/cmd/tfimport
tfimport
```

OR run directly:

```shell
go run github.com/GoogleCloudPlatform/healthcare-data-protection-suite/cmd/tfimport
```

On a successful run, the Terraform configs in the current working directory
will be initialized and all supported resources will be in the state.

If you now run `terraform plan`, you should only see planned changes for
differences between the configs and the actual infrastructure.

### Flags

```shell
$ tfimport -h
Usage:
  -input_dir string
     Path to the directory containing Terraform config. (default ".")
  -terraform_path string
     Name or path to the terraform binary to use.
     This could be i.e. 'terragrunt' or a path to
     a different version of terraform. (default "terraform")
```

## Terraformer

This tool is complementary to
[Terraformer](https://github.com/GoogleCloudPlatform/terraformer).

Terraformer focuses on generating new Terraform configs from existing
infrastructure, while the Importer allows you to define and organize your own
Terraform configs, including importing resources from within modules.

## Supported Resources

- [google_storage_bucket](https://www.terraform.io/docs/providers/google/r/storage_bucket.html)
- [google_container_cluster](https://www.terraform.io/docs/providers/google/r/container_cluster.html)
- [google_organization_policy](https://www.terraform.io/docs/providers/google/r/google_organization_policy.html)
- [google_organization_iam_member](https://www.terraform.io/docs/providers/google/r/google_organization_iam_member.html)
- [google_organization_iam_audit_config](https://www.terraform.io/docs/providers/google/r/google_organization_iam_audit_config.html)
- [google_project](https://www.terraform.io/docs/providers/google/r/google_project.html)
- [google_project_iam_binding](https://www.terraform.io/docs/providers/google/r/google_project_iam.html#google_project_iam_binding-1)
- [google_project_iam_member](https://www.terraform.io/docs/providers/google/r/google_project_iam.html#google_project_iam_member-1)
- [google_project_service](https://www.terraform.io/docs/providers/google/r/google_project_service.html)
- [google_service_account](https://www.terraform.io/docs/providers/google/r/google_service_account.html)
- [google_bigquery_table](https://www.terraform.io/docs/providers/google/r/bigquery_table.html)
- [google_bigquery_dataset](https://www.terraform.io/docs/providers/google/r/bigquery_dataset.html)
- [google_storage_bucket_iam_member](https://www.terraform.io/docs/providers/google/r/storage_bucket_iam.html#google_storage_bucket_iam_member)
