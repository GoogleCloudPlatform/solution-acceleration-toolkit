# Terraform Importer

Status: Early Access Program

Terraform Importer is a standalone utility to import existing infrastructure
into a Terraform state, based on existing Terraform configs. Its target use-case
is to facilitate migration between other infrastructure-as-code tools (such as
[Deployment Manager](https://cloud.google.com/deployment-manager)), and configs
generated by the Terrarom Engine.

## Requirements

- [Terraform 0.12+](https://www.terraform.io/downloads.html)
- [Go 1.14+](https://golang.org/dl/)

## Usage

```shell
go install ./cmd/tfimport
tfimport --input_dir ~/path/to/terraform/configs/dir/
```

OR

```shell
go run ./cmd/tfimport --input_dir ~/path/to/terraform/configs/dir/
```

On a successful run, the Terraform configs directory will be initialized and all
supported resources will be in the state.

If you now run `terraform plan`, you should only see planned changes for
differences between the configs and the actual infrastructure.

### Using a Different Terraform Binary

By default, the importer will call simply `terraform` to do operations.

If you want to use a specific terraform binary, or a wrapper like
[Terragrunt](https://terragrunt.gruntwork.io/), supply the right flag:

```shell
go run ./cmd/tfimport --input_dir ~/path/to/terraform/configs/dir/ --terraform_path='terragrunt'
```

## Terraformer

This tool is complementary to
[Terraformer](https://github.com/GoogleCloudPlatform/terraformer).

Terraformer focuses on generating new Terraform configs from existing
infrastructure, while the Importer allows you to define and organize your own
Terraform configs, including importing resources from within modules.

## Supported Resources

- [google_storage_bucket](https://www.terraform.io/docs/providers/google/r/storage_bucket.html)
- [google_container_cluster](https://www.terraform.io/docs/providers/google/r/container_cluster.html)
- [google_organization_policy](https://www.terraform.io/docs/providers/google/r/google_organization_policy.html)
- [google_organization_iam_member](https://www.terraform.io/docs/providers/google/r/google_organization_iam_member.html)
- [google_organization_iam_audit_config](https://www.terraform.io/docs/providers/google/r/google_organization_iam_audit_config.html)
- [google_project](https://www.terraform.io/docs/providers/google/r/google_project.html)
- [google_project_iam_binding](https://www.terraform.io/docs/providers/google/r/google_project_iam.html#google_project_iam_binding-1)
- [google_project_iam_member](https://www.terraform.io/docs/providers/google/r/google_project_iam.html#google_project_iam_member-1)
- [google_project_service](https://www.terraform.io/docs/providers/google/r/google_project_service.html)
